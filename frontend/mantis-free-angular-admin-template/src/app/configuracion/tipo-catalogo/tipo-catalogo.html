<app-spinner #spinnerExterno [manual]="true"></app-spinner>

<div class="row">
  <!-- Formulario -->
  <div class="col-sm-6">
    <app-card cardTitle="Registrar Tipo Cat치logo">
      <form (submit)="guardar(); $event.preventDefault()">

        <div class="mb-3">
          <label class="form-label">Nombre</label>
          <div class="input-with-icon">
            <input
              type="text"
              class="form-control"
              [value]="nombre()"
              [ngClass]="{
                'is-invalid': nombreTocado() && !nombre(),
                'is-valid': nombreTocado() && nombre()
              }"
              (input)="nombre.set($any($event.target).value)"
              (blur)="nombreTocado.set(true)"
            />
          </div>
          <div class="text-danger mt-1" *ngIf="nombreTocado() && !nombre()">
            El nombre es obligatorio
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">Descripci칩n</label>
          <div class="input-with-icon">
            <textarea
              class="form-control"
              [value]="descripcion()"
              [ngClass]="{
                'is-invalid': descripcionTocado() && !descripcion(),
                'is-valid': descripcionTocado() && descripcion()
              }"
              (input)="descripcion.set($any($event.target).value)"
              (blur)="descripcionTocado.set(true)"
            ></textarea>
          </div>
          <div class="text-danger mt-1" *ngIf="descripcionTocado() && !descripcion()">
            La descripci칩n es obligatoria
          </div>
        </div>


        <!-- Estado -->
        <div class="mb-3">
          <label class="form-label">Estado</label>
          <select
            class="form-select"
            [value]="estado()"
            (change)="estado.set($any($event.target).value)"
          >
            <option value="A">Activo</option>
            <option value="I">Inactivo</option>
          </select>
        </div>

        <button type="submit" class="btn btn-success">
          Guardar
        </button>
        <button type="button" class="btn btn-secondary ms-2" (click)="limpiarCampos()">
          Limpiar
        </button>
      </form>
    </app-card>
  </div>

  <!-- Tabla -->
  <div class="col-sm-6">
    <app-card cardTitle="Lista de Tipos de Cat치logo">
      <app-grid
        [columnas]="columnas"
        [datos]="tiposFiltrados()"
        [templates]="{ acciones: accionesTemplate }">
      </app-grid>

      <ng-template #accionesTemplate let-item>
        <button *ngFor="let accion of accionesTabla"
                class="{{ accion.class }} me-1"
                (click)="accion.callback(item)">
          {{ accion.label }}
        </button>
      </ng-template>

    </app-card>
  </div>
</div>
